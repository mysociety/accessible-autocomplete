{"version":3,"sources":["webpack://Autocomplete/webpack/universalModuleDefinition","webpack://Autocomplete/webpack/bootstrap","webpack://Autocomplete/external {\"amd\":\"preact\",\"commonjs\":\"preact\",\"commonjs2\":\"preact\",\"root\":\"preact\"}","webpack://Autocomplete/./status.js","webpack://Autocomplete/./dropdown-arrow-down.js","webpack://Autocomplete/./autocomplete.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Status","state","bump","debounced","componentWillMount","func","wait","immediate","timeout","that","this","debounceStatusUpdate","shouldSilence","props","isInFocus","validChoiceMade","setState","_ref","silenced","context","args","arguments","callNow","clearTimeout","setTimeout","apply","componentWillReceiveProps","_ref2","queryLength","render","_this$props","id","length","minQueryLength","selectedOption","selectedOptionIndex","tQueryTooShort","tNoResults","tSelectedOption","tResults","className","_this$state","queryTooShort","noResults","contentSelectedOption","content","external_amd_preact_commonjs_preact_commonjs2_preact_root_preact_","style","border","clip","height","marginBottom","marginRight","overflow","padding","position","whiteSpace","width","role","aria-atomic","aria-live","Component","defaultProps","index","DropdownArrowDown","version","xmlns","focusable","stroke","fill","fill-rule","points","keyCodes","13","27","32","38","40","isIosDevice","navigator","userAgent","match","Autocomplete","_this","_Component","elementReferences","focused","hovered","menuOpen","options","defaultValue","query","selected","ariaHint","handleComponentBlur","_assertThisInitialized","handleKeyDown","handleUpArrow","handleDownArrow","handleEnter","handlePrintableKey","handleListMouseLeave","handleOptionBlur","handleOptionClick","handleOptionFocus","handleOptionMouseDown","handleOptionMouseEnter","handleInputBlur","handleInputChange","handleInputClick","handleInputFocus","pollInputElement","getDirectInputChanges","isQueryAnOption","_this2","map","entry","templateInputValue","toLowerCase","indexOf","componentDidMount","componentWillUnmount","$pollInput","_this3","inputReference","target","componentDidUpdate","prevProps","prevState","componentLostFocus","focusedChanged","focus","focusedInput","componentGainedFocus","inputElement","setSelectionRange","hasAutoselect","autoselect","inputValueTemplate","templates","inputValue","templateSuggestion","suggestionTemplate","suggestion","newState","newQuery","confirmOnBlur","onConfirm","event","_this$state2","focusingOutsideComponent","relatedTarget","focusingInput","focusingAnotherOption","keepMenuOpen","_this$state3","_this4","minLength","source","showAllValues","queryEmpty","queryChanged","queryLongEnough","optionsAvailable","_this5","selectElement","currentSelectionIndex","_this$state4","shouldReopenMenu","forceUpdate","preventDefault","_this$state5","_this6","_this$state6","handleSpace","_this7","keyCode","dropdownArrow","_this8","_this$props2","cssNamespace","displayMenu","placeholder","required","tStatusQueryTooShort","tStatusNoResults","tStatusSelectedOption","tStatusResults","tAssistiveHint","dropdownArrowFactory","menuAttributes","_this$state7","inputFocused","noOptionsAvailable","queryNotEmpty","showNoOptionsFound","wrapperClassName","inputClassName","statusClassName","inputModifierFocused","inputModifierType","dropdownArrowClassName","optionFocused","menuClassName","menuModifierDisplayMenu","menuModifierVisibility","optionClassName","hintClassName","selectedOptionText","hintValue","substr","assistiveHintID","ariaProps","aria-describedby","aria-expanded","aria-activedescendant","aria-owns","aria-autocomplete","dangerouslySetInnerHTML","__html","onKeyDown","status_Status","readonly","tabIndex","_extends","autoComplete","onClick","onBlur","onInput","onFocus","ref","type","onMouseLeave","option","optionModifierFocused","optionModifierOdd","iosPosinsetHtml","aria-selected","onMouseDown","onMouseEnter","optionEl","aria-posinset","aria-setsize","display"],"mappings":"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","file":"lib/accessible-autocomplete.preact.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"preact\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"preact\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Autocomplete\"] = factory(require(\"preact\"));\n\telse\n\t\troot[\"Autocomplete\"] = factory(root[\"preact\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import { createElement, Component } from 'preact' /** @jsx createElement */\n\nconst debounce = function (func, wait, immediate) {\n  var timeout\n  return function () {\n    var context = this\n    var args = arguments\n    var later = function () {\n      timeout = null\n      if (!immediate) func.apply(context, args)\n    }\n    var callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(context, args)\n  }\n}\nconst statusDebounceMillis = 1400\n\nexport default class Status extends Component {\n  static defaultProps = {\n    tQueryTooShort: (minQueryLength) => `Type in ${minQueryLength} or more characters for results`,\n    tNoResults: () => 'No search results',\n    tSelectedOption: (selectedOption, length, index) => `${selectedOption} ${index + 1} of ${length} is highlighted`,\n    tResults: (length, contentSelectedOption) => {\n      const words = {\n        result: (length === 1) ? 'result' : 'results',\n        is: (length === 1) ? 'is' : 'are'\n      }\n\n      return `${length} ${words.result} ${words.is} available. ${contentSelectedOption}`\n    }\n  };\n\n  state = {\n    bump: false,\n    debounced: false\n  }\n\n  componentWillMount () {\n    const that = this\n    this.debounceStatusUpdate = debounce(function () {\n      if (!that.state.debounced) {\n        const shouldSilence = !that.props.isInFocus || that.props.validChoiceMade\n        that.setState(({ bump }) => ({ bump: !bump, debounced: true, silenced: shouldSilence }))\n      }\n    }, statusDebounceMillis)\n  }\n\n  componentWillReceiveProps ({ queryLength }) {\n    this.setState({ debounced: false })\n  }\n\n  render () {\n    const {\n      id,\n      length,\n      queryLength,\n      minQueryLength,\n      selectedOption,\n      selectedOptionIndex,\n      tQueryTooShort,\n      tNoResults,\n      tSelectedOption,\n      tResults,\n      className\n    } = this.props\n    const { bump, debounced, silenced } = this.state\n\n    const queryTooShort = queryLength < minQueryLength\n    const noResults = length === 0\n\n    const contentSelectedOption = selectedOption\n      ? tSelectedOption(selectedOption, length, selectedOptionIndex)\n      : ''\n\n    let content = null\n    if (queryTooShort) {\n      content = tQueryTooShort(minQueryLength)\n    } else if (noResults) {\n      content = tNoResults()\n    } else {\n      content = tResults(length, contentSelectedOption)\n    }\n\n    this.debounceStatusUpdate()\n\n    return (\n      <div\n        className={className}\n        style={{\n          border: '0',\n          clip: 'rect(0 0 0 0)',\n          height: '1px',\n          marginBottom: '-1px',\n          marginRight: '-1px',\n          overflow: 'hidden',\n          padding: '0',\n          position: 'absolute',\n          whiteSpace: 'nowrap',\n          width: '1px'\n        }}>\n        <div\n          id={id + '__status--A'}\n          role='status'\n          aria-atomic='true'\n          aria-live='polite'>\n          {(!silenced && debounced && bump) ? content : ''}\n        </div>\n        <div\n          id={id + '__status--B'}\n          role='status'\n          aria-atomic='true'\n          aria-live='polite'>\n          {(!silenced && debounced && !bump) ? content : ''}\n        </div>\n      </div>\n    )\n  }\n}\n","import { createElement } from 'preact' /** @jsx createElement */\n\nconst DropdownArrowDown = ({ className }) => (\n  <svg version='1.1' xmlns='http://www.w3.org/2000/svg' className={className} focusable='false'>\n    <g stroke='none' fill='none' fill-rule='evenodd'>\n      <polygon fill='#000000' points='0 0 22 0 11 17' />\n    </g>\n  </svg>\n)\n\nexport default DropdownArrowDown\n","import { createElement, Component } from 'preact' /** @jsx createElement */\nimport Status from './status'\nimport DropdownArrowDown from './dropdown-arrow-down'\n\nconst IS_PREACT = process.env.COMPONENT_LIBRARY === 'PREACT'\nconst IS_REACT = process.env.COMPONENT_LIBRARY === 'REACT'\n\nconst keyCodes = {\n  13: 'enter',\n  27: 'escape',\n  32: 'space',\n  38: 'up',\n  40: 'down'\n}\n\nfunction isIosDevice () {\n  return typeof navigator !== 'undefined' && !!(navigator.userAgent.match(/(iPod|iPhone|iPad)/g) && navigator.userAgent.match(/AppleWebKit/g))\n}\n\nfunction isPrintableKeyCode (keyCode) {\n  return (\n    (keyCode > 47 && keyCode < 58) || // number keys\n    keyCode === 32 || keyCode === 8 || // spacebar or backspace\n    (keyCode > 64 && keyCode < 91) || // letter keys\n    (keyCode > 95 && keyCode < 112) || // numpad keys\n    (keyCode > 185 && keyCode < 193) || // ;=,-./` (in order)\n    (keyCode > 218 && keyCode < 223) // [\\]' (in order)\n  )\n}\n\n// Preact does not implement onChange on inputs, but React does.\nfunction onChangeCrossLibrary (handler) {\n  if (IS_PREACT) { return { onInput: handler } }\n  if (IS_REACT) { return { onChange: handler } }\n}\n\nexport default class Autocomplete extends Component {\n  static defaultProps = {\n    autoselect: false,\n    cssNamespace: 'autocomplete',\n    defaultValue: '',\n    displayMenu: 'inline',\n    minLength: 0,\n    name: 'input-autocomplete',\n    placeholder: '',\n    onConfirm: () => {},\n    confirmOnBlur: true,\n    showNoOptionsFound: true,\n    showAllValues: false,\n    required: false,\n    tNoResults: () => 'No results found',\n    tAssistiveHint: () => 'When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures.',\n    dropdownArrow: DropdownArrowDown,\n    menuAttributes: {}\n  }\n\n  elementReferences = {}\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      focused: null,\n      hovered: null,\n      menuOpen: false,\n      options: props.defaultValue ? [props.defaultValue] : [],\n      query: props.defaultValue,\n      validChoiceMade: false,\n      selected: null,\n      ariaHint: true\n    }\n\n    this.handleComponentBlur = this.handleComponentBlur.bind(this)\n    this.handleKeyDown = this.handleKeyDown.bind(this)\n    this.handleUpArrow = this.handleUpArrow.bind(this)\n    this.handleDownArrow = this.handleDownArrow.bind(this)\n    this.handleEnter = this.handleEnter.bind(this)\n    this.handlePrintableKey = this.handlePrintableKey.bind(this)\n\n    this.handleListMouseLeave = this.handleListMouseLeave.bind(this)\n\n    this.handleOptionBlur = this.handleOptionBlur.bind(this)\n    this.handleOptionClick = this.handleOptionClick.bind(this)\n    this.handleOptionFocus = this.handleOptionFocus.bind(this)\n    this.handleOptionMouseDown = this.handleOptionMouseDown.bind(this)\n    this.handleOptionMouseEnter = this.handleOptionMouseEnter.bind(this)\n\n    this.handleInputBlur = this.handleInputBlur.bind(this)\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.handleInputClick = this.handleInputClick.bind(this)\n    this.handleInputFocus = this.handleInputFocus.bind(this)\n\n    this.pollInputElement = this.pollInputElement.bind(this)\n    this.getDirectInputChanges = this.getDirectInputChanges.bind(this)\n  }\n\n  isQueryAnOption (query, options) {\n    return options.map(entry => this.templateInputValue(entry).toLowerCase()).indexOf(query.toLowerCase()) !== -1\n  }\n\n  componentDidMount () {\n    this.pollInputElement()\n  }\n\n  componentWillUnmount () {\n    clearTimeout(this.$pollInput)\n  }\n\n  // Applications like Dragon NaturallySpeaking will modify the\n  // `input` field by directly changing its `.value`. These events\n  // don't trigger our JavaScript event listeners, so we need to poll\n  // to handle when and if they occur.\n  pollInputElement () {\n    this.getDirectInputChanges()\n    this.$pollInput = setTimeout(() => {\n      this.pollInputElement()\n    }, 100)\n  }\n\n  getDirectInputChanges () {\n    const inputReference = this.elementReferences[-1]\n    const queryHasChanged = inputReference && inputReference.value !== this.state.query\n\n    if (queryHasChanged) {\n      this.handleInputChange({ target: { value: inputReference.value } })\n    }\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    const { focused } = this.state\n    const componentLostFocus = focused === null\n    const focusedChanged = prevState.focused !== focused\n    const focusDifferentElement = focusedChanged && !componentLostFocus\n    if (focusDifferentElement) {\n      this.elementReferences[focused].focus()\n    }\n    const focusedInput = focused === -1\n    const componentGainedFocus = focusedChanged && prevState.focused === null\n    const selectAllText = focusedInput && componentGainedFocus\n    if (selectAllText) {\n      const inputElement = this.elementReferences[focused]\n      inputElement.setSelectionRange(0, inputElement.value.length)\n    }\n  }\n\n  hasAutoselect () {\n    return isIosDevice() ? false : this.props.autoselect\n  }\n\n  // This template is used when converting from a state.options object into a state.query.\n  templateInputValue (value) {\n    const inputValueTemplate = this.props.templates && this.props.templates.inputValue\n    return inputValueTemplate ? inputValueTemplate(value) : value\n  }\n\n  // This template is used when displaying results / suggestions.\n  templateSuggestion (value) {\n    const suggestionTemplate = this.props.templates && this.props.templates.suggestion\n    return suggestionTemplate ? suggestionTemplate(value) : value\n  }\n\n  handleComponentBlur (newState) {\n    const { options, query, selected } = this.state\n    let newQuery\n    if (this.props.confirmOnBlur) {\n      newQuery = newState.query || query\n      this.props.onConfirm(options[selected])\n    } else {\n      newQuery = query\n    }\n    this.setState({\n      focused: null,\n      menuOpen: newState.menuOpen || false,\n      query: newQuery,\n      selected: null,\n      validChoiceMade: this.isQueryAnOption(newQuery, options)\n    })\n  }\n\n  handleListMouseLeave (event) {\n    this.setState({\n      hovered: null\n    })\n  }\n\n  handleOptionBlur (event, index) {\n    const { focused, menuOpen, options, selected } = this.state\n    const focusingOutsideComponent = event.relatedTarget === null\n    const focusingInput = event.relatedTarget === this.elementReferences[-1]\n    const focusingAnotherOption = focused !== index && focused !== -1\n    const blurComponent = (!focusingAnotherOption && focusingOutsideComponent) || !(focusingAnotherOption || focusingInput)\n    if (blurComponent) {\n      const keepMenuOpen = menuOpen && isIosDevice()\n      this.handleComponentBlur({\n        menuOpen: keepMenuOpen,\n        query: this.templateInputValue(options[selected])\n      })\n    }\n  }\n\n  handleInputBlur (event) {\n    const { focused, menuOpen, options, query, selected } = this.state\n    const focusingAnOption = focused !== -1\n    if (!focusingAnOption) {\n      const keepMenuOpen = menuOpen && isIosDevice()\n      const newQuery = isIosDevice() ? query : this.templateInputValue(options[selected])\n      this.handleComponentBlur({\n        menuOpen: keepMenuOpen,\n        query: newQuery\n      })\n    }\n  }\n\n  handleInputChange (event) {\n    const { minLength, source, showAllValues } = this.props\n    const autoselect = this.hasAutoselect()\n    const query = event.target.value\n    const queryEmpty = query.length === 0\n    const queryChanged = this.state.query !== query\n    const queryLongEnough = query.length >= minLength\n\n    this.setState({\n      query,\n      ariaHint: queryEmpty\n    })\n\n    const searchForOptions = showAllValues || (!queryEmpty && queryChanged && queryLongEnough)\n    if (searchForOptions) {\n      source(query, (options) => {\n        const optionsAvailable = options.length > 0\n        this.setState({\n          menuOpen: optionsAvailable,\n          options,\n          selected: (autoselect && optionsAvailable) ? 0 : -1,\n          validChoiceMade: false\n        })\n      })\n    } else if (queryEmpty || !queryLongEnough) {\n      this.setState({\n        menuOpen: false,\n        options: []\n      })\n    }\n  }\n\n  handleInputClick (event) {\n    if (this.props.selectElement) {\n      if (this.state.menuOpen === false) {\n        this.props.source('', (options) => {\n          let currentSelectionIndex = options.indexOf(this.state.query)\n\n          this.setState({\n            menuOpen: true,\n            options,\n            focused: currentSelectionIndex,\n            selected: currentSelectionIndex,\n            hovered: null\n          })\n        })\n      } else {\n        this.handleComponentBlur({\n          menuOpen: false\n        }, true)\n      }\n    } else {\n      this.handleInputChange(event)\n    }\n  }\n\n  handleInputFocus (event) {\n    if (this.props.selectElement) {\n      return\n    }\n    const { query, validChoiceMade, options } = this.state\n    const { minLength } = this.props\n    const shouldReopenMenu = query && !validChoiceMade && query.length >= minLength && options.length > 0\n\n    if (shouldReopenMenu) {\n      this.setState(({ menuOpen }) => ({ focused: -1, menuOpen: shouldReopenMenu || menuOpen, selected: -1 }))\n    } else {\n      this.setState({ focused: -1 })\n    }\n  }\n\n  handleOptionFocus (index) {\n    this.setState({\n      focused: index,\n      hovered: null,\n      selected: index\n    })\n  }\n\n  handleOptionMouseEnter (event, index) {\n    // iOS Safari prevents click event if mouseenter adds hover background colour\n    // See: https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW4\n    if (!isIosDevice()) {\n      this.setState({\n        hovered: index\n      })\n    }\n  }\n\n  handleOptionClick (event, index) {\n    const selectedOption = this.state.options[index]\n    const newQuery = this.templateInputValue(selectedOption)\n    this.props.onConfirm(selectedOption)\n    this.setState({\n      focused: -1,\n      hovered: null,\n      menuOpen: false,\n      query: newQuery,\n      selected: -1,\n      validChoiceMade: true\n    })\n    this.forceUpdate()\n  }\n\n  handleOptionMouseDown (event) {\n    // Safari triggers focusOut before click, but if you\n    // preventDefault on mouseDown, you can stop that from happening.\n    // If this is removed, clicking on an option in Safari will trigger\n    // `handleOptionBlur`, which closes the menu, and the click will\n    // trigger on the element underneath instead.\n    // See: http://stackoverflow.com/questions/7621711/how-to-prevent-blur-running-when-clicking-a-link-in-jquery\n    event.preventDefault()\n  }\n\n  handleUpArrow (event) {\n    event.preventDefault()\n    const { menuOpen, selected } = this.state\n    const isNotAtTop = selected !== -1\n    const allowMoveUp = isNotAtTop && menuOpen\n    if (allowMoveUp) {\n      this.handleOptionFocus(selected - 1)\n    }\n  }\n\n  handleDownArrow (event) {\n    event.preventDefault()\n    // if not open, open\n    if (this.props.showAllValues && this.state.menuOpen === false) {\n      event.preventDefault()\n      this.props.source('', (options) => {\n        this.setState({\n          menuOpen: true,\n          options,\n          selected: 0,\n          focused: 0,\n          hovered: null\n        })\n      })\n    } else if (this.state.menuOpen === true) {\n      const { menuOpen, options, selected } = this.state\n      const isNotAtBottom = selected !== options.length - 1\n      const allowMoveDown = isNotAtBottom && menuOpen\n      if (allowMoveDown) {\n        this.handleOptionFocus(selected + 1)\n      }\n    }\n  }\n\n  handleSpace (event) {\n    // if not open, open\n    if (this.props.showAllValues && this.state.menuOpen === false && this.state.query === '') {\n      event.preventDefault()\n      this.props.source('', (options) => {\n        this.setState({\n          menuOpen: true,\n          options\n        })\n      })\n    }\n    const focusIsOnOption = this.state.focused !== -1\n    if (focusIsOnOption) {\n      event.preventDefault()\n      this.handleOptionClick(event, this.state.focused)\n    }\n  }\n\n  handleEnter (event) {\n    if (this.state.menuOpen) {\n      event.preventDefault()\n      const hasSelectedOption = this.state.selected >= 0\n      if (hasSelectedOption) {\n        this.handleOptionClick(event, this.state.selected)\n      }\n    }\n  }\n\n  handlePrintableKey (event) {\n    const inputElement = this.elementReferences[-1]\n    const eventIsOnInput = event.target === inputElement\n    if (!eventIsOnInput) {\n      // FIXME: This would be better if it was in componentDidUpdate,\n      // but using setState to trigger that seems to not work correctly\n      // in preact@8.1.0.\n      inputElement.focus()\n    }\n  }\n\n  handleKeyDown (event) {\n    switch (keyCodes[event.keyCode]) {\n      case 'up':\n        this.handleUpArrow(event)\n        break\n      case 'down':\n        this.handleDownArrow(event)\n        break\n      case 'space':\n        this.handleSpace(event)\n        break\n      case 'enter':\n        this.handleEnter(event)\n        break\n      case 'escape':\n        this.handleComponentBlur({\n          query: this.state.query\n        })\n        break\n      default:\n        if (isPrintableKeyCode(event.keyCode)) {\n          this.handlePrintableKey(event)\n        }\n        break\n    }\n  }\n\n  render () {\n    const {\n      cssNamespace,\n      displayMenu,\n      id,\n      minLength,\n      name,\n      placeholder,\n      required,\n      showAllValues,\n      tNoResults,\n      tStatusQueryTooShort,\n      tStatusNoResults,\n      tStatusSelectedOption,\n      tStatusResults,\n      tAssistiveHint,\n      dropdownArrow: dropdownArrowFactory,\n      menuAttributes\n    } = this.props\n    const { focused, hovered, menuOpen, options, query, selected, ariaHint, validChoiceMade } = this.state\n    const autoselect = this.hasAutoselect()\n\n    const inputFocused = focused === -1\n    const noOptionsAvailable = options.length === 0\n    const queryNotEmpty = query.length !== 0\n    const queryLongEnough = query.length >= minLength\n    const showNoOptionsFound = this.props.showNoOptionsFound &&\n      inputFocused && noOptionsAvailable && queryNotEmpty && queryLongEnough\n\n    const wrapperClassName = `${cssNamespace}__wrapper`\n\n    const inputClassName = `${cssNamespace}__input`\n    const statusClassName = `${cssNamespace}__status`\n    const componentIsFocused = focused !== null\n    const inputModifierFocused = componentIsFocused ? ` ${inputClassName}--focused` : ''\n    const inputModifierType = this.props.showAllValues ? ` ${inputClassName}--show-all-values` : ` ${inputClassName}--default`\n    const dropdownArrowClassName = `${cssNamespace}__dropdown-arrow-down`\n    const optionFocused = focused !== -1 && focused !== null\n\n    const menuClassName = `${cssNamespace}__menu`\n    const menuModifierDisplayMenu = `${menuClassName}--${displayMenu}`\n    const menuIsVisible = menuOpen || showNoOptionsFound\n    const menuModifierVisibility = `${menuClassName}--${(menuIsVisible) ? 'visible' : 'hidden'}`\n\n    const optionClassName = `${cssNamespace}__option`\n\n    const hintClassName = `${cssNamespace}__hint`\n    const selectedOptionText = this.templateInputValue(options[selected])\n    const optionBeginsWithQuery = selectedOptionText &&\n      selectedOptionText.toLowerCase().indexOf(query.toLowerCase()) === 0\n    const hintValue = (optionBeginsWithQuery && autoselect)\n      ? query + selectedOptionText.substr(query.length)\n      : ''\n\n    const assistiveHintID = id + '__assistiveHint'\n    const ariaProps = {\n      'aria-describedby': ariaHint ? assistiveHintID : null,\n      'aria-expanded': menuOpen ? 'true' : 'false',\n      'aria-activedescendant': optionFocused ? `${id}__option--${focused}` : null,\n      'aria-owns': `${id}__listbox`,\n      'aria-autocomplete': (this.hasAutoselect()) ? 'both' : 'list'\n    }\n\n    let dropdownArrow\n\n    // we only need a dropdown arrow if showAllValues is set to a truthy value\n    if (showAllValues) {\n      dropdownArrow = dropdownArrowFactory({ className: dropdownArrowClassName })\n\n      // if the factory returns a string we'll render this as HTML (usage w/o (P)React)\n      if (typeof dropdownArrow === 'string') {\n        dropdownArrow = <div className={`${cssNamespace}__dropdown-arrow-down-wrapper`} dangerouslySetInnerHTML={{ __html: dropdownArrow }} />\n      }\n    }\n\n    return (\n      <div className={wrapperClassName} onKeyDown={this.handleKeyDown}>\n        <Status\n          id={id}\n          length={options.length}\n          queryLength={query.length}\n          minQueryLength={minLength}\n          selectedOption={this.templateInputValue(options[selected])}\n          selectedOptionIndex={selected}\n          validChoiceMade={validChoiceMade}\n          isInFocus={this.state.focused !== null}\n          tQueryTooShort={tStatusQueryTooShort}\n          tNoResults={tStatusNoResults}\n          tSelectedOption={tStatusSelectedOption}\n          tResults={tStatusResults}\n          className={statusClassName}\n        />\n\n        {hintValue && (\n          <span><input className={hintClassName} readonly tabIndex='-1' value={hintValue} /></span>\n        )}\n\n        <input\n          {...ariaProps}\n          autoComplete='off'\n          className={`${inputClassName}${inputModifierFocused}${inputModifierType}`}\n          id={id}\n          onClick={(event) => this.handleInputClick(event)}\n          onBlur={this.handleInputBlur}\n          {...onChangeCrossLibrary(this.handleInputChange)}\n          onFocus={this.handleInputFocus}\n          name={name}\n          placeholder={placeholder}\n          ref={(inputElement) => { this.elementReferences[-1] = inputElement }}\n          type='text'\n          role='combobox'\n          required={required}\n          value={query}\n        />\n\n        {dropdownArrow}\n\n        <ul\n          className={`${menuClassName} ${menuModifierDisplayMenu} ${menuModifierVisibility}`}\n          onMouseLeave={(event) => this.handleListMouseLeave(event)}\n          id={`${id}__listbox`}\n          role='listbox'\n          {...menuAttributes}\n        >\n          {options.map((option, index) => {\n            const showFocused = focused === -1 ? selected === index : focused === index\n            const optionModifierFocused = showFocused && hovered === null ? ` ${optionClassName}--focused` : ''\n            const optionModifierOdd = (index % 2) ? ` ${optionClassName}--odd` : ''\n            const iosPosinsetHtml = (isIosDevice())\n              ? `<span id=${id}__option-suffix--${index} style=\"border:0;clip:rect(0 0 0 0);height:1px;` +\n                'marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;' +\n                'whiteSpace:nowrap;width:1px\">' + ` ${index + 1} of ${options.length}</span>`\n              : ''\n\n            return (\n              <li\n                aria-selected={focused === index ? 'true' : 'false'}\n                className={`${optionClassName}${optionModifierFocused}${optionModifierOdd}`}\n                dangerouslySetInnerHTML={{ __html: this.templateSuggestion(option) + iosPosinsetHtml }}\n                id={`${id}__option--${index}`}\n                key={index}\n                onBlur={(event) => this.handleOptionBlur(event, index)}\n                onClick={(event) => this.handleOptionClick(event, index)}\n                onMouseDown={this.handleOptionMouseDown}\n                onMouseEnter={(event) => this.handleOptionMouseEnter(event, index)}\n                ref={(optionEl) => { this.elementReferences[index] = optionEl }}\n                role='option'\n                tabIndex='-1'\n                aria-posinset={index + 1}\n                aria-setsize={options.length}\n              />\n            )\n          })}\n\n          {showNoOptionsFound && (\n            <li className={`${optionClassName} ${optionClassName}--no-results`}>{tNoResults()}</li>\n          )}\n        </ul>\n\n        <span id={assistiveHintID} style={{ display: 'none' }}>{tAssistiveHint()}</span>\n\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}