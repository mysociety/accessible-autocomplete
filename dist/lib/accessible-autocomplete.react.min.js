!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Autocomplete=t(require("react")):e.Autocomplete=t(e.React)}(this,function(n){return function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=1)}([function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var J=n(0);var X=function(s){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=s.call.apply(s,[this].concat(n))||this).state={bump:!1,debounced:!1},e}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentWillMount=function(){var o,s,i,a,e=this;this.debounceStatusUpdate=(o=function(){if(!e.state.debounced){var t=!e.props.isInFocus||e.props.validChoiceMade;e.setState(function(e){return{bump:!e.bump,debounced:!0,silenced:t}})}},s=1400,function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||o.apply(e,t)},s),n&&o.apply(e,t)})},o.componentWillReceiveProps=function(e){e.queryLength;this.setState({debounced:!1})},o.render=function(){var e=this.props,t=e.id,n=e.length,o=e.queryLength,s=e.minQueryLength,i=e.selectedOption,a=e.selectedOptionIndex,r=e.tQueryTooShort,l=e.tNoResults,u=e.tSelectedOption,p=e.tResults,c=e.className,d=this.state,h=d.bump,f=d.debounced,m=d.silenced,v=o<s,b=0===n,O=i?u(i,n,a):"",g=null;return g=v?r(s):b?l():p(n,O),this.debounceStatusUpdate(),Object(J.createElement)("div",{className:c,style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},Object(J.createElement)("div",{id:t+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!m&&f&&h?g:""),Object(J.createElement)("div",{id:t+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},m||!f||h?"":g))},n}(J.Component),o=function(e){var t=e.className;return Object(J.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},Object(J.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},Object(J.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))};function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}X.defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(e,t,n){return e+" "+(n+1)+" of "+t+" is highlighted"},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}};var a={13:"enter",27:"escape",32:"space",38:"up",40:"down"};function Z(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var s=function(n){var e,t;function o(e){var t;return(t=n.call(this,e)||this).elementReferences={},t.state={focused:null,hovered:null,menuOpen:!1,options:e.defaultValue?[e.defaultValue]:[],query:e.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},t.handleComponentBlur=t.handleComponentBlur.bind(i(i(t))),t.handleKeyDown=t.handleKeyDown.bind(i(i(t))),t.handleUpArrow=t.handleUpArrow.bind(i(i(t))),t.handleDownArrow=t.handleDownArrow.bind(i(i(t))),t.handleEnter=t.handleEnter.bind(i(i(t))),t.handlePrintableKey=t.handlePrintableKey.bind(i(i(t))),t.handleListMouseLeave=t.handleListMouseLeave.bind(i(i(t))),t.handleOptionBlur=t.handleOptionBlur.bind(i(i(t))),t.handleOptionClick=t.handleOptionClick.bind(i(i(t))),t.handleOptionFocus=t.handleOptionFocus.bind(i(i(t))),t.handleOptionMouseDown=t.handleOptionMouseDown.bind(i(i(t))),t.handleOptionMouseEnter=t.handleOptionMouseEnter.bind(i(i(t))),t.handleInputBlur=t.handleInputBlur.bind(i(i(t))),t.handleInputChange=t.handleInputChange.bind(i(i(t))),t.handleInputClick=t.handleInputClick.bind(i(i(t))),t.handleInputFocus=t.handleInputFocus.bind(i(i(t))),t.pollInputElement=t.pollInputElement.bind(i(i(t))),t.getDirectInputChanges=t.getDirectInputChanges.bind(i(i(t))),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var s=o.prototype;return s.isQueryAnOption=function(e,t){var n=this;return-1!==t.map(function(e){return n.templateInputValue(e).toLowerCase()}).indexOf(e.toLowerCase())},s.componentDidMount=function(){this.pollInputElement()},s.componentWillUnmount=function(){clearTimeout(this.$pollInput)},s.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout(function(){e.pollInputElement()},100)},s.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},s.componentDidUpdate=function(e,t){var n=this.state.focused,o=null===n,s=t.focused!==n;s&&!o&&this.elementReferences[n].focus();var i=-1===n,a=s&&null===t.focused;if(i&&a){var r=this.elementReferences[n];r.setSelectionRange(0,r.value.length)}},s.hasAutoselect=function(){return!Z()&&this.props.autoselect},s.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},s.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},s.handleComponentBlur=function(e){var t,n=this.state,o=n.options,s=n.query,i=n.selected;this.props.confirmOnBlur?(t=e.query||s,this.props.onConfirm(o[i])):t=s,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:t,selected:null,validChoiceMade:this.isQueryAnOption(t,o)})},s.handleListMouseLeave=function(e){this.setState({hovered:null})},s.handleOptionBlur=function(e,t){var n=this.state,o=n.focused,s=n.menuOpen,i=n.options,a=n.selected,r=null===e.relatedTarget,l=e.relatedTarget===this.elementReferences[-1],u=o!==t&&-1!==o;if(!u&&r||!(u||l)){var p=s&&Z();this.handleComponentBlur({menuOpen:p,query:this.templateInputValue(i[a])})}},s.handleInputBlur=function(e){var t=this.state,n=t.focused,o=t.menuOpen,s=t.options,i=t.query,a=t.selected;if(!(-1!==n)){var r=o&&Z(),l=Z()?i:this.templateInputValue(s[a]);this.handleComponentBlur({menuOpen:r,query:l})}},s.handleInputChange=function(e){var n=this,t=this.props,o=t.minLength,s=t.source,i=t.showAllValues,a=this.hasAutoselect(),r=e.target.value,l=0===r.length,u=this.state.query!==r,p=r.length>=o;this.setState({query:r,ariaHint:l}),i||!l&&u&&p?s(r,function(e){var t=0<e.length;n.setState({menuOpen:t,options:e,selected:a&&t?0:-1,validChoiceMade:!1})}):!l&&p||this.setState({menuOpen:!1,options:[]})},s.handleInputClick=function(e){var n=this;this.props.selectElement?!1===this.state.menuOpen?this.props.source("",function(e){var t=e.indexOf(n.state.query);n.setState({menuOpen:!0,options:e,focused:t,selected:t,hovered:null})}):this.handleComponentBlur({menuOpen:!1},!0):this.handleInputChange(e)},s.handleInputFocus=function(e){if(!this.props.selectElement){var t=this.state,n=t.query,o=t.validChoiceMade,s=t.options,i=this.props.minLength,a=n&&!o&&n.length>=i&&0<s.length;a?this.setState(function(e){var t=e.menuOpen;return{focused:-1,menuOpen:a||t,selected:-1}}):this.setState({focused:-1})}},s.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},s.handleOptionMouseEnter=function(e,t){Z()||this.setState({hovered:t})},s.handleOptionClick=function(e,t){var n=this.state.options[t],o=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,hovered:null,menuOpen:!1,query:o,selected:-1,validChoiceMade:!0}),this.forceUpdate()},s.handleOptionMouseDown=function(e){e.preventDefault()},s.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,o=t.selected;-1!==o&&n&&this.handleOptionFocus(o-1)},s.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})});else if(!0===this.state.menuOpen){var n=this.state,o=n.menuOpen,s=n.options,i=n.selected;i!==s.length-1&&o&&this.handleOptionFocus(i+1)}},s.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e})})),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},s.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},s.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},s.handleKeyDown=function(e){switch(a[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(47<(t=e.keyCode)&&t<58||32===t||8===t||64<t&&t<91||95<t&&t<112||185<t&&t<193||218<t&&t<223)&&this.handlePrintableKey(e)}var t},s.render=function(){var e,i=this,t=this.props,n=t.cssNamespace,o=t.displayMenu,a=t.id,s=t.minLength,r=t.name,l=t.placeholder,u=t.required,p=t.showAllValues,c=t.tNoResults,d=t.tStatusQueryTooShort,h=t.tStatusNoResults,f=t.tStatusSelectedOption,m=t.tStatusResults,v=t.tAssistiveHint,b=t.dropdownArrow,O=t.menuAttributes,g=this.state,y=g.focused,w=g.hovered,C=g.menuOpen,_=g.options,I=g.query,S=g.selected,x=g.ariaHint,A=g.validChoiceMade,E=this.hasAutoselect(),M=-1===y,j=0===_.length,D=0!==I.length,q=I.length>=s,N=this.props.showNoOptionsFound&&M&&j&&D&&q,L=n+"__wrapper",R=n+"__input",B=n+"__status",k=null!==y?" "+R+"--focused":"",V=this.props.showAllValues?" "+R+"--show-all-values":" "+R+"--default",P=n+"__dropdown-arrow-down",T=-1!==y&&null!==y,F=n+"__menu",K=F+"--"+o,U=F+"--"+(C||N?"visible":"hidden"),H=n+"__option",Q=n+"__hint",W=this.templateInputValue(_[S]),$=W&&0===W.toLowerCase().indexOf(I.toLowerCase())&&E?I+W.substr(I.length):"",z=a+"__assistiveHint",G={"aria-describedby":x?z:null,"aria-expanded":C?"true":"false","aria-activedescendant":T?a+"__option--"+y:null,"aria-owns":a+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"};return p&&"string"==typeof(e=b({className:P}))&&(e=Object(J.createElement)("div",{className:n+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),Object(J.createElement)("div",{className:L,onKeyDown:this.handleKeyDown},Object(J.createElement)(X,{id:a,length:_.length,queryLength:I.length,minQueryLength:s,selectedOption:this.templateInputValue(_[S]),selectedOptionIndex:S,validChoiceMade:A,isInFocus:null!==this.state.focused,tQueryTooShort:d,tNoResults:h,tSelectedOption:f,tResults:m,className:B}),$&&Object(J.createElement)("span",null,Object(J.createElement)("input",{className:Q,readonly:!0,tabIndex:"-1",value:$})),Object(J.createElement)("input",Y({},G,{autoComplete:"off",className:""+R+k+V,id:a,onClick:function(e){return i.handleInputClick(e)},onBlur:this.handleInputBlur},{onChange:this.handleInputChange},{onFocus:this.handleInputFocus,name:r,placeholder:l,ref:function(e){i.elementReferences[-1]=e},type:"text",role:"combobox",required:u,value:I})),e,Object(J.createElement)("ul",Y({className:F+" "+K+" "+U,onMouseLeave:function(e){return i.handleListMouseLeave(e)},id:a+"__listbox",role:"listbox"},O),_.map(function(e,t){var n=(-1===y?S===t:y===t)&&null===w?" "+H+"--focused":"",o=t%2?" "+H+"--odd":"",s=Z()?"<span id="+a+"__option-suffix--"+t+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(t+1)+" of "+_.length+"</span>":"";return Object(J.createElement)("li",{"aria-selected":y===t?"true":"false",className:""+H+n+o,dangerouslySetInnerHTML:{__html:i.templateSuggestion(e)+s},id:a+"__option--"+t,key:t,onBlur:function(e){return i.handleOptionBlur(e,t)},onClick:function(e){return i.handleOptionClick(e,t)},onMouseDown:i.handleOptionMouseDown,onMouseEnter:function(e){return i.handleOptionMouseEnter(e,t)},ref:function(e){i.elementReferences[t]=e},role:"option",tabIndex:"-1","aria-posinset":t+1,"aria-setsize":_.length})}),N&&Object(J.createElement)("li",{className:H+" "+H+"--no-results"},c())),Object(J.createElement)("span",{id:z,style:{display:"none"}},v()))},o}(J.Component);s.defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:o,menuAttributes:{}}}])});
//# sourceMappingURL=accessible-autocomplete.react.min.js.map