!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Autocomplete=t(require("react")):e.Autocomplete=t(e.React)}(this,function(n){return function(n){var o={};function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}return s.m=n,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=1)}([function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var z=n(0);var G=function(s){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=s.call.apply(s,[this].concat(n))||this).state={bump:!1,debounced:!1},e}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=n.prototype;return o.componentWillMount=function(){var o,s,r,i,e=this;this.debounceStatusUpdate=(o=function(){if(!e.state.debounced){var t=!e.props.isInFocus||e.props.validChoiceMade;e.setState(function(e){return{bump:!e.bump,debounced:!0,silenced:t}})}},s=1400,function(){var e=this,t=arguments,n=r&&!i;clearTimeout(i),i=setTimeout(function(){i=null,r||o.apply(e,t)},s),n&&o.apply(e,t)})},o.componentWillReceiveProps=function(e){e.queryLength;this.setState({debounced:!1})},o.render=function(){var e=this.props,t=e.id,n=e.length,o=e.queryLength,s=e.minQueryLength,r=e.selectedOption,i=e.selectedOptionIndex,a=e.tQueryTooShort,l=e.tNoResults,u=e.tSelectedOption,p=e.tResults,c=this.state,d=c.bump,h=c.debounced,f=c.silenced,m=o<s,v=0===n,b=r?u(r,n,i):"",g=null;return g=m?a(s):v?l():p(n,b),this.debounceStatusUpdate(),Object(z.createElement)("div",{style:{border:"0",clip:"rect(0 0 0 0)",height:"1px",marginBottom:"-1px",marginRight:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},Object(z.createElement)("div",{id:t+"__status--A",role:"status","aria-atomic":"true","aria-live":"polite"},!f&&h&&d?g:""),Object(z.createElement)("div",{id:t+"__status--B",role:"status","aria-atomic":"true","aria-live":"polite"},f||!h||d?"":g))},n}(z.Component),o=function(e){var t=e.className;return Object(z.createElement)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:t,focusable:"false"},Object(z.createElement)("g",{stroke:"none",fill:"none","fill-rule":"evenodd"},Object(z.createElement)("polygon",{fill:"#000000",points:"0 0 22 0 11 17"})))};function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}G.defaultProps={tQueryTooShort:function(e){return"Type in "+e+" or more characters for results"},tNoResults:function(){return"No search results"},tSelectedOption:function(e,t,n){return e+" "+(n+1)+" of "+t+" is highlighted"},tResults:function(e,t){return e+" "+(1===e?"result":"results")+" "+(1===e?"is":"are")+" available. "+t}};var i={13:"enter",27:"escape",32:"space",38:"up",40:"down"};function X(){return"undefined"!=typeof navigator&&!(!navigator.userAgent.match(/(iPod|iPhone|iPad)/g)||!navigator.userAgent.match(/AppleWebKit/g))}var s=function(n){var e,t;function o(e){var t;return(t=n.call(this,e)||this).elementReferences={},t.state={focused:null,hovered:null,menuOpen:!1,options:e.defaultValue?[e.defaultValue]:[],query:e.defaultValue,validChoiceMade:!1,selected:null,ariaHint:!0},t.handleComponentBlur=t.handleComponentBlur.bind(r(r(t))),t.handleKeyDown=t.handleKeyDown.bind(r(r(t))),t.handleUpArrow=t.handleUpArrow.bind(r(r(t))),t.handleDownArrow=t.handleDownArrow.bind(r(r(t))),t.handleEnter=t.handleEnter.bind(r(r(t))),t.handlePrintableKey=t.handlePrintableKey.bind(r(r(t))),t.handleListMouseLeave=t.handleListMouseLeave.bind(r(r(t))),t.handleOptionBlur=t.handleOptionBlur.bind(r(r(t))),t.handleOptionClick=t.handleOptionClick.bind(r(r(t))),t.handleOptionFocus=t.handleOptionFocus.bind(r(r(t))),t.handleOptionMouseDown=t.handleOptionMouseDown.bind(r(r(t))),t.handleOptionMouseEnter=t.handleOptionMouseEnter.bind(r(r(t))),t.handleInputBlur=t.handleInputBlur.bind(r(r(t))),t.handleInputChange=t.handleInputChange.bind(r(r(t))),t.handleInputFocus=t.handleInputFocus.bind(r(r(t))),t.pollInputElement=t.pollInputElement.bind(r(r(t))),t.getDirectInputChanges=t.getDirectInputChanges.bind(r(r(t))),t}t=n,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var s=o.prototype;return s.isQueryAnOption=function(e,t){var n=this;return-1!==t.map(function(e){return n.templateInputValue(e).toLowerCase()}).indexOf(e.toLowerCase())},s.componentDidMount=function(){this.pollInputElement()},s.componentWillUnmount=function(){clearTimeout(this.$pollInput)},s.pollInputElement=function(){var e=this;this.getDirectInputChanges(),this.$pollInput=setTimeout(function(){e.pollInputElement()},100)},s.getDirectInputChanges=function(){var e=this.elementReferences[-1];e&&e.value!==this.state.query&&this.handleInputChange({target:{value:e.value}})},s.componentDidUpdate=function(e,t){var n=this.state.focused,o=null===n,s=t.focused!==n;s&&!o&&this.elementReferences[n].focus();var r=-1===n,i=s&&null===t.focused;if(r&&i){var a=this.elementReferences[n];a.setSelectionRange(0,a.value.length)}},s.hasAutoselect=function(){return!X()&&this.props.autoselect},s.templateInputValue=function(e){var t=this.props.templates&&this.props.templates.inputValue;return t?t(e):e},s.templateSuggestion=function(e){var t=this.props.templates&&this.props.templates.suggestion;return t?t(e):e},s.handleComponentBlur=function(e){var t,n=this.state,o=n.options,s=n.query,r=n.selected;this.props.confirmOnBlur?(t=e.query||s,this.props.onConfirm(o[r])):t=s,this.setState({focused:null,menuOpen:e.menuOpen||!1,query:t,selected:null,validChoiceMade:this.isQueryAnOption(t,o)})},s.handleListMouseLeave=function(e){this.setState({hovered:null})},s.handleOptionBlur=function(e,t){var n=this.state,o=n.focused,s=n.menuOpen,r=n.options,i=n.selected,a=null===e.relatedTarget,l=e.relatedTarget===this.elementReferences[-1],u=o!==t&&-1!==o;if(!u&&a||!(u||l)){var p=s&&X();this.handleComponentBlur({menuOpen:p,query:this.templateInputValue(r[i])})}},s.handleInputBlur=function(e){var t=this.state,n=t.focused,o=t.menuOpen,s=t.options,r=t.query,i=t.selected;if(!(-1!==n)){var a=o&&X(),l=X()?r:this.templateInputValue(s[i]);this.handleComponentBlur({menuOpen:a,query:l})}},s.handleInputChange=function(e){var n=this,t=this.props,o=t.minLength,s=t.source,r=t.showAllValues,i=this.hasAutoselect(),a=e.target.value,l=0===a.length,u=this.state.query.length!==a.length,p=a.length>=o;this.setState({query:a,ariaHint:l}),r||!l&&u&&p?s(a,function(e){var t=0<e.length;n.setState({menuOpen:t,options:e,selected:i&&t?0:-1,validChoiceMade:!1})}):!l&&p||this.setState({menuOpen:!1,options:[]})},s.handleInputClick=function(e){var n=this;this.props.selectElement?!1===this.state.menuOpen?this.props.source("",function(e){var t=e.indexOf(n.state.query);n.setState({menuOpen:!0,options:e,focused:t,selected:t,hovered:null})}):this.handleComponentBlur({menuOpen:!1},!0):this.handleInputChange(e)},s.handleInputFocus=function(e){var t=this.state,n=t.query,o=t.validChoiceMade,s=t.options,r=this.props.minLength,i=!o&&n.length>=r&&0<s.length;i?this.setState(function(e){var t=e.menuOpen;return{focused:-1,menuOpen:i||t,selected:-1}}):this.setState({focused:-1})},s.handleOptionFocus=function(e){this.setState({focused:e,hovered:null,selected:e})},s.handleOptionMouseEnter=function(e,t){X()||this.setState({hovered:t})},s.handleOptionClick=function(e,t){var n=this.state.options[t],o=this.templateInputValue(n);this.props.onConfirm(n),this.setState({focused:-1,hovered:null,menuOpen:!1,query:o,selected:-1,validChoiceMade:!0}),this.forceUpdate()},s.handleOptionMouseDown=function(e){e.preventDefault()},s.handleUpArrow=function(e){e.preventDefault();var t=this.state,n=t.menuOpen,o=t.selected;-1!==o&&n&&this.handleOptionFocus(o-1)},s.handleDownArrow=function(e){var t=this;if(e.preventDefault(),this.props.showAllValues&&!1===this.state.menuOpen)e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e,selected:0,focused:0,hovered:null})});else if(!0===this.state.menuOpen){var n=this.state,o=n.menuOpen,s=n.options,r=n.selected;r!==s.length-1&&o&&this.handleOptionFocus(r+1)}},s.handleSpace=function(e){var t=this;this.props.showAllValues&&!1===this.state.menuOpen&&""===this.state.query&&(e.preventDefault(),this.props.source("",function(e){t.setState({menuOpen:!0,options:e})})),-1!==this.state.focused&&(e.preventDefault(),this.handleOptionClick(e,this.state.focused))},s.handleEnter=function(e){this.state.menuOpen&&(e.preventDefault(),0<=this.state.selected&&this.handleOptionClick(e,this.state.selected))},s.handlePrintableKey=function(e){var t=this.elementReferences[-1];e.target===t||t.focus()},s.handleKeyDown=function(e){switch(i[e.keyCode]){case"up":this.handleUpArrow(e);break;case"down":this.handleDownArrow(e);break;case"space":this.handleSpace(e);break;case"enter":this.handleEnter(e);break;case"escape":this.handleComponentBlur({query:this.state.query});break;default:(47<(t=e.keyCode)&&t<58||32===t||8===t||64<t&&t<91||95<t&&t<112||185<t&&t<193||218<t&&t<223)&&this.handlePrintableKey(e)}var t},s.render=function(){var e,r=this,t=this.props,n=t.cssNamespace,o=t.displayMenu,i=t.id,s=t.minLength,a=t.name,l=t.placeholder,u=t.required,p=t.showAllValues,c=t.tNoResults,d=t.tStatusQueryTooShort,h=t.tStatusNoResults,f=t.tStatusSelectedOption,m=t.tStatusResults,v=t.tAssistiveHint,b=t.dropdownArrow,g=this.state,O=g.focused,y=g.hovered,w=g.menuOpen,C=g.options,_=g.query,S=g.selected,I=g.ariaHint,x=g.validChoiceMade,M=this.hasAutoselect(),E=-1===O,A=0===C.length,j=0!==_.length,D=_.length>=s,q=this.props.showNoOptionsFound&&E&&A&&j&&D,L=n+"__wrapper",R=n+"__input",B=null!==O?" "+R+"--focused":"",N=this.props.showAllValues?" "+R+"--show-all-values":" "+R+"--default",k=n+"__dropdown-arrow-down",V=-1!==O&&null!==O,P=n+"__menu",T=P+"--"+o,F=P+"--"+(w||q?"visible":"hidden"),K=n+"__option",U=n+"__hint",H=this.templateInputValue(C[S]),Q=H&&0===H.toLowerCase().indexOf(_.toLowerCase())&&M?_+H.substr(_.length):"",W=i+"__assistiveHint",$=I?{"aria-describedby":W}:null;return p&&"string"==typeof(e=b({className:k}))&&(e=Object(z.createElement)("div",{className:n+"__dropdown-arrow-down-wrapper",dangerouslySetInnerHTML:{__html:e}})),Object(z.createElement)("div",{className:L,onKeyDown:this.handleKeyDown},Object(z.createElement)(G,{id:i,length:C.length,queryLength:_.length,minQueryLength:s,selectedOption:this.templateInputValue(C[S]),selectedOptionIndex:S,validChoiceMade:x,isInFocus:null!==this.state.focused,tQueryTooShort:d,tNoResults:h,tSelectedOption:f,tResults:m}),Q&&Object(z.createElement)("span",null,Object(z.createElement)("input",{className:U,readonly:!0,tabIndex:"-1",value:Q})),Object(z.createElement)("input",J({"aria-expanded":w?"true":"false","aria-activedescendant":!!V&&i+"__option--"+O,"aria-owns":i+"__listbox","aria-autocomplete":this.hasAutoselect()?"both":"list"},$,{autoComplete:"off",className:""+R+B+N,id:i,onClick:function(e){return r.handleInputClick(e)},onBlur:this.handleInputBlur},{onChange:this.handleInputChange},{onFocus:this.handleInputFocus,name:a,placeholder:l,ref:function(e){r.elementReferences[-1]=e},type:"text",role:"combobox",required:u,value:_})),e,Object(z.createElement)("ul",{className:P+" "+T+" "+F,onMouseLeave:function(e){return r.handleListMouseLeave(e)},id:i+"__listbox",role:"listbox"},C.map(function(e,t){var n=(-1===O?S===t:O===t)&&null===y?" "+K+"--focused":"",o=t%2?" "+K+"--odd":"",s=X()?"<span id="+i+"__option-suffix--"+t+' style="border:0;clip:rect(0 0 0 0);height:1px;marginBottom:-1px;marginRight:-1px;overflow:hidden;padding:0;position:absolute;whiteSpace:nowrap;width:1px"> '+(t+1)+" of "+C.length+"</span>":"";return Object(z.createElement)("li",{"aria-selected":O===t?"true":"false",className:""+K+n+o,dangerouslySetInnerHTML:{__html:r.templateSuggestion(e)+s},id:i+"__option--"+t,key:t,onBlur:function(e){return r.handleOptionBlur(e,t)},onClick:function(e){return r.handleOptionClick(e,t)},onMouseDown:r.handleOptionMouseDown,onMouseEnter:function(e){return r.handleOptionMouseEnter(e,t)},ref:function(e){r.elementReferences[t]=e},role:"option",tabIndex:"-1","aria-posinset":t+1,"aria-setsize":C.length})}),q&&Object(z.createElement)("li",{className:K+" "+K+"--no-results"},c())),Object(z.createElement)("span",{id:W,style:{display:"none"}},v()))},o}(z.Component);s.defaultProps={autoselect:!1,cssNamespace:"autocomplete",defaultValue:"",displayMenu:"inline",minLength:0,name:"input-autocomplete",placeholder:"",onConfirm:function(){},confirmOnBlur:!0,showNoOptionsFound:!0,showAllValues:!1,required:!1,tNoResults:function(){return"No results found"},tAssistiveHint:function(){return"When autocomplete results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."},dropdownArrow:o}}])});
//# sourceMappingURL=accessible-autocomplete.react.min.js.map